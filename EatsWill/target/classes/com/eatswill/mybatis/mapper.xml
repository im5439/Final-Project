<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper">

<select id="test" resultType="int">
	select nvl(max(num),0) from test
</select>

<select id="selectCustom" parameterType="String" resultType="String">
	select USERID id from custom where USERID=#{id}
</select>

<select id="checkIdPw" parameterType="hashMap" resultType="com.eatswill.dto.CustomDTO">
	select 	USERID id, USERPW pw, USERNAME name, USERTEL tel, 
			USEREMAIL email, USERPOINT point, USERADDR addr 
	from 	custom 
	where 	USERID=#{id} and USERPW=#{pw}
</select>

<insert id="insertCustom" parameterType="com.eatswill.dto.CustomDTO">
	insert into custom (USERID,USERPW,USERNAME,USERTEL,USEREMAIL,USERPOINT,USERADDR) 
	values (#{id},#{pw},#{name},#{tel},#{email},1000,(#{addr}||' '||#{addr2}))
</insert>

<select id="tryIdPw" parameterType="hashMap" resultType="com.eatswill.dto.CustomDTO">
	select USERID id, USERPW pw, USERNAME name, USEREMAIL email from custom where ${user}=#{id} and USEREMAIL=#{email}
</select>

</mapper>