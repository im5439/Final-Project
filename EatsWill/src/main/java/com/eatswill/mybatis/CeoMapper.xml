<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="CeoMapper">

<!-- 매장코드 최대값 -->
<select id="getMaxCode" resultType="int">
	select nvl(max(shopCode),100000) from shop
</select>

<!-- 사장님 회원가입 -->
<insert id="insertCeo" parameterType="com.eatswill.dto.CeoDTO">
	insert into ceo (ceoId,ceoPw,ceoName,ceoEmail) values (#{ceoId},#{ceoPw},#{ceoName},#{ceoEmail})
</insert>

<!-- 사장님아이디에 대한 정보 -->
<select id="getReadData" parameterType="String" resultType="com.eatswill.dto.CeoDTO">
	select * from ceo where ceoId = #{ceoId}
</select>

<!-- 사장님 매장추가 -->
<insert id="insertStore" parameterType="com.eatswill.dto.CeoDTO">
	insert into shop (shopCode, ceoId, shopName, category, shopAddr, shopTel, timeCode, shopImg, shopCreated, franchise)
	values (#{category}||'_'||no_seq_shopCode.nextval, #{ceoId}, #{shopName}, #{category}, #{shopAddr}, #{shopTel}, 1, #{shopImg}, sysdate, #{franchise})	
</insert>

<!-- 사장님 보유매장 -->
<select id="getStore" parameterType="String" resultType="com.eatswill.dto.CeoDTO">
	select * from shop where ceoId = #{ceoId}
</select>

<!-- 사장님 보유매장 개수 -->
<select id="getStoreCount" parameterType="String" resultType="int">
	select nvl(count(*),0) from shop ceoId = #{ceoId}
</select>

<!-- 보유매장에 대한 리뷰 -->
<select id="getStoreReview" >
	select * from review where shopCode = #{shopCode}
</select>

</mapper>